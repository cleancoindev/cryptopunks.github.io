---
layout: post
title:  "Обход блокировок TOR"
meta_description: "Инструкция по тому как обойти блокировку TOR в странах где закрыты все exit-ноды сети"
date:   2017-02-10
tags: linux tor obfs3 obfs4 proxy blocking belarus obfuscation
categories: article
author: "soko1"
---

Существует огромное кол-во способов блокировки сети TOR, но самая популярная - когда блокируют все общественно доступные exit-ноды сети TOR. Например, именно такая блокировка существует в Республике Беларусь (и скоро по всей видимости ждёт тоже самое и жителей Российской Федерации). Но на каждый лом найдётся свой приём :)

## Использование torbrowser

Если вы используете **torbrowser**, то обойти блокировку лучше по [этой статье](https://cryptopunks.org/article/how+to+unblock+tor+through+torbrowser/) 

## Использование демона tor

Если планируется использовать демон tor, то необходимо получить у torproject адреса ретрансляторов <a href="https://bridges.torproject.org/bridges?transport=obfs3" target="_blank">на этой странице</a> (необходимо будет ввести капчу).

После чего поставить прокси-сервер, чтобы обфусцировать (замаскировать) передаваемый трафик (скрыть, что используется сеть TOR). Например, можно использовать для этого **obfsproxy**:

```
$ sudo apt install obfsproxy
```

Далее необходимо отредактировать **torrc**, включив полученные адреса:

```
UseBridges 1
TransPort 9040
Exitpolicy reject *:*
ExtORPort auto
ClientTransportPlugin obfs3 exec /usr/bin/obfsproxy managed

## тут вписываем полученные ранее на сайте адреса
## дописав вначале каждой строки bridge (!)
bridge obfs3 АДРЕС1:ПОРТ1 ХЕШ1
bridge obfs3 АДРЕС2:ПОРТ2 ХЕШ2
bridge obfs3 АДРЕС3:ПОРТ3 ХЕШ3
...
```

Приводить свой адрес/порт с хешем я не буду, дабы они не попали со временем в блокировку. Советую и вам нигде их не светить без особой надобности. Можно прописать не 3, а ещё несколько адресов для перестраховки.


Обычно я добавляю ещё исключение для выходных нод, чтобы "свои" не снифали трафик:

```
ExcludeExitNodes {RU},{UA},{BY}
```

Перезапускаем демон:

```
$ sudo /etc/init.d/tor restart
```

Проверяем:

```
$ torify curl -s https://check.torproject.org/ | grep -m 1 Congratulations

      Congratulations. This browser is configured to use Tor.
```

Не забываем так же про синхронизацию часов, если они сильно отстают, или спешат, то tor откажется работать. Помним и про лог **/var/log/tor/log**, он обычно подробно сигнализирует о каких-либо проблемах подключения.

## Проблемы и замечания

Если вы столкнулись с какой-либо другой проблемой, или у вас есть ещё какие-либо сведения о блокировке тор и способах обхода - просьба [сообщить об этом](/contacts), и в ближайшее время мы попробуем пополнить статью дополнительными советами.
